#! /usr/bin/env bash

echo ">> creating container to run indexer"

docker run -d -P \
       -v "$(pwd)":/indexer \
       --name index-builder \
       quay.io/sharelatex/datajoy:2015.6;

docker exec index-builder bash -c "apt-get update && apt-get install -y git &&
    curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.29.0/install.sh | bash &&
    source ~/.nvm/nvm.sh &&
    nvm install 4.2 &&
    cd /indexer &&
    npm install"
